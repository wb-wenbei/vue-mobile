(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["eventAdd"],{"3a02":function(e,t,i){"use strict";i("701f")},"4ce3":function(e,t,i){"use strict";i("7810")},"51aa":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"position-content"},[i("van-cell",{attrs:{"is-link":""},scopedSlots:e._u([{key:"icon",fn:function(){return[i("van-icon",{attrs:{name:e.editIcons.position,size:"20px"}})]},proxy:!0},{key:"title",fn:function(){return[i("span",{staticClass:"custom-title"},[e._v(e._s(e.address))])]},proxy:!0},{key:"right-icon",fn:function(){return[i("van-icon",{attrs:{name:e.editIcons.edit,size:"20px"},on:{click:function(t){e.mapShow=!0}}})]},proxy:!0}])}),i("van-popup",{style:{height:"100%",width:"100%"},model:{value:e.mapShow,callback:function(t){e.mapShow=t},expression:"mapShow"}},[i("div",{staticClass:"map-content"},[i("div",{staticClass:"header"}),i("div",{staticClass:"map",attrs:{id:"map"}}),i("van-button",{staticClass:"btn",attrs:{size:"small",type:"primary"},on:{click:function(t){e.mapShow=!1}}},[e._v(" 完成 ")]),i("div",{staticClass:"address-picker"},[i("van-picker",{attrs:{columns:e.addressList},on:{change:e.onConfirm}})],1)],1)])],1)},n=[],o=(i("99af"),i("4160"),i("d81d"),i("159b"),i("2909")),s=i("024c"),r=i.n(s),c={name:"position",props:{value:{},location:{type:Boolean,default:!0}},data:function(){return{editIcons:{edit:i("6a6f"),position:i("a5c3")},mapShow:!0,showPicker:!1,map:null,center:[],marker:null,address:"",addressList:[]}},watch:{address:function(e){"未获取到位置信息，请手动选择"!==e&&this.$emit("getAddress",e)}},created:function(){var e=this.$store.state.userInfo;e&&e.location&&(this.center=[e.location.lng,e.location.lat]),this.value&&this.value.lng&&this.value.lat&&(this.center=[this.value.lng,this.value.lat])},mounted:function(){this.loadMap()},methods:{loadMap:function(){this.map=new r.a.Map("map",{zoom:15,resizeEnable:!0}),this.center&&this.center.length&&this.map.setCenter(this.center),this.center=this.map.getCenter(),this.marker=new r.a.Marker({position:this.center}),this.map.add(this.marker),this.map.on("mapmove",this.mapMove),this.map.on("moveend",this.mapMoveEnd),this.location&&this.getPosition()},getPosition:function(){var e=this;r.a.plugin("AMap.Geolocation",(function(){var t=new r.a.Geolocation({enableHighAccuracy:!0,timeout:5e3,buttonOffset:new r.a.Pixel(10,20),zoomToAccuracy:!0,useNative:!0,buttonPosition:"RB"});e.map.addControl(t),t.getCurrentPosition(),r.a.event.addListener(t,"complete",(function(t){e.center=t.position,e.mapMoveEnd()})),r.a.event.addListener(t,"error",(function(t){e.$toast("无法获取您的位置："+JSON.stringify(t))}))}))},getAddress:function(e){var t=this;r.a.plugin("AMap.Geocoder",(function(){var i=new r.a.Geocoder({city:"010"});i.getAddress(e,(function(i,a){"complete"===i&&"OK"===a.info?(t.address=a.regeocode.formattedAddress,t.addressList=[{text:t.address,value:t.address,location:e}]):t.address="未获取到位置信息，请手动选择"})),t.mapSearch(t.center)}))},mapSearch:function(e){var t=this;r.a.service(["AMap.PlaceSearch"],(function(){var i=new r.a.PlaceSearch({pageSize:10,pageIndex:1,extensions:"base",autoFitView:!0});i.searchNearBy("",e,200,(function(e,i){if("complete"===e&&"OK"===i.info){var a=[];i.poiList.pois.forEach((function(e){e.address&&a.push({text:e.address,value:e.address,location:e.location})})),t.addressList=[].concat(Object(o["a"])(t.addressList),a),t.showPicker=!0}}))}))},mapMove:function(){this.center=this.map.getCenter(),this.marker.setPosition(this.center)},mapMoveEnd:function(){this.getAddress(this.center),this.marker.setAnimation("AMAP_ANIMATION_DROP"),this.$emit("input",this.center)},onConfirm:function(e,t){this.showPicker=!1,this.address=t.value,this.center=t.location,this.marker.setPosition(this.center),this.marker.setAnimation("AMAP_ANIMATION_DROP"),this.$emit("input",this.center)},getWebPosition:function(){var e=this;"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(t){e.$toast("位置："+t.coords.latitude+t.coords.longitude)}),(function(t){e.$toast("位置err："+t.message)})):this.$toast("地理位置服务不可用")}}},l=c,u=(i("3a02"),i("2877")),d=Object(u["a"])(l,a,n,!1,null,"38fb694e",null);t["a"]=d.exports},"6a6f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAYAAAH7pGGjAAAAAXNSR0IArs4c6QAABJ5JREFUWAnlWE2II1UQftXJJD0jg8kkIF70oGcPZtGLMLLoydO4m+SkLoIjHvxBWDwI7oAXD6KiJ9c9uKC403EEEQVd8bwyzsmfm6AisshMEhA3nd7tV1a9TvV0d9KdTjI6C75D6r2qet/7urrqvddRakKDqK7qDC4hwl9Rnapsu+9lK2LW5GAL0YrpKh33jZozOBMqK457veZ49x0qtgdY+9i7P1TM3GFI4t2VxYtJBHYoAj58Q6l3LMCftgB0zIcdWME8xiJAehO3ChENZsGFftt+KujHf4GCegVRZT8NADFJaQTwe4rpUC1URB5aIj0xspR+xBx0xSByzIEVUWO0H3OOGqL9mBMP6jvevSyznKDmDDd81J+wY7+9HEtc1s3cIGs5QeOVZl4qCvxCyy4ksyteELJUiuSiZBOAdQ+zecsZ7kcXYNtUQJ4QFMWAChz+CAKoXx4B7eQOqADxqtII+HnWr3WGTdEl5XgFcu1Q2vdbdhhf3gV89L9VqKiesl9xCGgeIQlEVev7/hXKl6lAwjQEZAWxWmLJ5W+A/PxAPI+beayqc/0BRP8bGl8sFK3zB6dKu8Y6xw/UP8VV3/MemWNubMpSEXf/3LB/jimPZUCHwbN8IExaPEyLScakrro9fAmVfo31lqUudpvLZ6I+UytEnAWoYFmnilA4obV6Yq0zeF/sLHODPQSl13mCr/W7+63SngBWOt7jrOc29TGFEVdE08HCZXT5sNgHgCVEvLXXsi3qm5MoE0yAyPkaTVxJAKookKGW9sNAXHa1zvBR9qk67t+mDKnPDAk8k0iImwQSA4MJoOgyZRoQMesz0MKMjhHIwTv4ESTYEodZGQVJC+7TDHDQLJuDlPsMRPGJ5RHrs5oBQ602aQvfE8d5gHiuyZXgdQNdutDsvGzInZDsPGqjx4Qhwf4ACp6pr9o2Z7qUiDj+5xL4DdIts7Toyr1m+VKuy0uehQDsO/P45fbJV/m54cYdZRsTC2/3z522n0zessQelf8auRgpuo1Qtr2CGs9SOleZQB6SR06Od721jvsRfX60gyhAj4it91rl73lcd7zGDdSX85A8MnImUhbe1m/aLzIJPjC+Vu6HhyT5aLNOMkm+fmmtv+TtiX1BWY/12uUPuB9tC5OLvT5BtuDNDJLiRRIuENnNtA1mbnIxUpRTBYA2KN31ET6niKwYBqkks0kJ+5nJTSIVPU0YuN4ZPJhGUhbOI2NX8qwJQopugPQ2gkglScl8xMI1pbT5ujc6rVa5UNJen8xLyqmRE1Jm4hRS/OWjlf5KEn1aTiXJJMep5GYilai+RUkJyTFyNwOpieT4xKa7+w4bLQVnu23b3OfFWWRynzqqSAm+yFhBaI2bxgDg3a7Kb3fFaySFFH2/ms0zSgpG50FiykLD8LVW6caK6P7KaFRV56FQflVrr2Ep3UANDVKvo8JbgtXy7VOB7/y/IblKZ3hOab01GYrun6B+pH8EPzs4bZ+bdUuYjDmjtvEdLt39BZZnnPb/dIeKM9ilv4tO3DyPD9ou4V1XN5Z/Ka4s2+sDd3jSQgi/aY6TqFalvasb8Btz+Ac6b8bVIaneFwAAAABJRU5ErkJggg=="},"701f":function(e,t,i){},7810:function(e,t,i){},"87d4":function(e,t,i){"use strict";i.d(t,"g",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return r})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return l})),i.d(t,"a",(function(){return u}));var a=i("afaa"),n=function(e){return Object(a["a"])({url:"/api-customer/location/issue/report",method:"POST",data:e})},o=function(e){return Object(a["a"])({url:"/api-customer/location/issueClassifys",method:"GET",params:e})},s=function(e){return Object(a["a"])({url:"/api-customer/location/issues/among/".concat(e.id),method:"GET"})},r=function(e){return Object(a["a"])({url:"/api-customer/location/facility/types",method:"GET",params:e})},c=function(e){return Object(a["a"])({url:"api-customer/location/issue/handle",method:"POST",data:e})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:"/api-customer/location/issue/unableHandle",method:"POST",data:e.data})},u=function(e){return Object(a["a"])({url:"/api-customer/location/issuePostpone/create",method:"POST",data:e})}},"99af":function(e,t,i){"use strict";var a=i("23e7"),n=i("d039"),o=i("e8b5"),s=i("861d"),r=i("7b0b"),c=i("50c4"),l=i("8418"),u=i("65f0"),d=i("1dde"),f=i("b622"),p=i("2d00"),m=f("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",b=p>=51||!n((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),g=d("concat"),A=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)},y=!b||!g;a({target:"Array",proto:!0,forced:y},{concat:function(e){var t,i,a,n,o,s=r(this),d=u(s,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?s:arguments[t],A(o)){if(n=c(o.length),f+n>h)throw TypeError(v);for(i=0;i<n;i++,f++)i in o&&l(d,f,o[i])}else{if(f>=h)throw TypeError(v);l(d,f++,o)}return d.length=f,d}})},a1b1:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-field",{attrs:{name:"uploader",required:e.required,rules:[{required:e.required,message:"请上传图片"}],label:e.label},scopedSlots:e._u([{key:"input",fn:function(){return[i("van-uploader",e._g(e._b({attrs:{"after-read":e.afterRead,multiple:e.multiple,capture:e.capture,"max-count":e.maxCount},on:{delete:e.deleteFile},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},"van-uploader",e.$attrs,!1),e.$listeners))]},proxy:!0}]),model:{value:e.pickerValue,callback:function(t){e.pickerValue=t},expression:"pickerValue"}})},n=[],o=(i("4160"),i("a434"),i("a9e3"),i("d3b7"),i("159b"),i("96cf"),i("1da1")),s=i("bc3a"),r=i.n(s),c={name:"uploadImg",props:{value:{},label:{type:String,default:"上传图片"},url:{type:String,default:"/api-customer/zuul/dig-construction/uploadFile"},maxCount:{type:Number,default:1},multiple:{type:Boolean,default:!0},required:{type:Boolean,default:!1},capture:{type:String}},data:function(){return{pickerValue:"",fileList:[]}},watch:{value:function(){this.load()}},created:function(){this.load()},methods:{load:function(){Array.isArray(this.value)?this.fileList=this.value:this.value?this.fileList=[{url:this.value}]:this.fileList=[]},afterRead:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.status="uploading",e.message="上传中...",t.upLoaderImg(e.file).then((function(i){e.status="success",1===t.maxCount?(t.$emit("input",i.data.url),t.pickerValue=i.data.url):(t.fileList[t.fileList.length-1]={url:i.data.url},t.$emit("input",t.fileList),t.pickerValue=JSON.stringify(t.fileList))})).catch((function(i){e.status="failed",e.message="上传失败",t.$emit("error",i)}));case 3:case"end":return i.stop()}}),i)})))()},deleteFile:function(e){var t=this;1===this.maxCount?this.$emit("input",""):(this.fileList.forEach((function(i,a){e.url===i.url&&t.fileList.splice(a,1)})),this.$emit("input",this.fileList))},upLoaderImg:function(e){var t=this,i=new FormData;i.append("file",e);var a={headers:{"Content-Type":"multipart/form-data",token:this.$store.state.token}};return new Promise((function(e,n){r.a.post(t.url,i,a).then((function(t){t&&t.data&&200===t.data.code?e(t.data):n(t.data)})).catch((function(e){n(e)}))}))}}},l=c,u=i("2877"),d=Object(u["a"])(l,a,n,!1,null,"734b520c",null);t["a"]=d.exports},a434:function(e,t,i){"use strict";var a=i("23e7"),n=i("23cb"),o=i("a691"),s=i("50c4"),r=i("7b0b"),c=i("65f0"),l=i("8418"),u=i("1dde"),d=i("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var i,a,u,d,f,p,g=r(this),A=s(g.length),y=n(e,A),k=arguments.length;if(0===k?i=a=0:1===k?(i=0,a=A-y):(i=k-2,a=h(m(o(t),0),A-y)),A+i-a>v)throw TypeError(b);for(u=c(g,a),d=0;d<a;d++)f=y+d,f in g&&l(u,d,g[f]);if(u.length=a,i<a){for(d=y;d<A-a;d++)f=d+a,p=d+i,f in g?g[p]=g[f]:delete g[p];for(d=A;d>A-a+i;d--)delete g[d-1]}else if(i>a)for(d=A-a;d>y;d--)f=d+a-1,p=d+i-1,f in g?g[p]=g[f]:delete g[p];for(d=0;d<i;d++)g[d+y]=arguments[d+2];return g.length=A-a+i,u}})},a5c3:function(e,t){e.exports="data:image/png;base64,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"},b5ef:function(e,t,i){},e38a:function(e,t,i){"use strict";i("b5ef")},ef57:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"event-add-content"},[i("div",{staticClass:"form-content"},[i("van-cell-group",[i("van-field",{staticClass:"report-desc",attrs:{type:"textarea",clearable:"",border:!1,autosize:{minHeight:80},placeholder:"请输入"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),i("upload-img",{attrs:{capture:"camera"},model:{value:e.imageUrl,callback:function(t){e.imageUrl=t},expression:"imageUrl"}}),i("position",{on:{getAddress:e.getAddress},model:{value:e.position,callback:function(t){e.position=t},expression:"position"}}),i("form-picker",{attrs:{label:"设施类型",columns:e.facilityTypes},on:{change:e.renderIssueTypes},model:{value:e.form.facilityTypeCode,callback:function(t){e.$set(e.form,"facilityTypeCode",t)},expression:"form.facilityTypeCode"}}),i("form-picker",{attrs:{label:"问题分类",columns:e.issueClassifys},model:{value:e.form.issueTypeId,callback:function(t){e.$set(e.form,"issueTypeId",t)},expression:"form.issueTypeId"}})],1)],1),i("div",{staticClass:"form-footer"},[i("van-button",{staticClass:"report-btn myBtn",attrs:{round:"",type:"primary",loading:e.loading,disabled:e.disabled},on:{click:function(t){return e.saveReport(!0)}}},[e._v(" 本人处理 ")]),i("van-button",{staticClass:"report-btn",attrs:{round:"",type:"primary",loading:e.loading,disabled:e.disabled},on:{click:function(t){return e.saveReport(!1)}}},[e._v(" 上报处理 ")])],1)])},n=[],o=(i("a4d3"),i("e01a"),i("4160"),i("b0c0"),i("d3b7"),i("159b"),i("51aa")),s=i("a1b1"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-picker",class:e.showBottomBorder?"show-bottom-border":""},[i("van-field",e._g(e._b({attrs:{readonly:"",clickable:"",name:"picker",label:e.label,placeholder:e.placeholder},on:{click:function(t){e.showPicker=!0}},model:{value:e.currentLabel,callback:function(t){e.currentLabel=t},expression:"currentLabel"}},"van-field",e.$attrs,!1),e.$listeners)),i("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1)],1)},c=[],l={name:"picker",props:{value:{},columns:{},label:{type:String,default:"选择器"},placeholder:{type:String,default:"点击选择"},showBottomBorder:{type:Boolean,default:!0}},data:function(){return{showPicker:!1,currentValue:"",currentLabel:""}},watch:{value:function(){this.load()},columns:{deep:!0,handler:function(){this.load()}}},created:function(){this.load()},methods:{load:function(){var e=this;this.currentValue=this.value,this.currentLabel="",this.columns.forEach((function(t){t.value===e.value&&(e.currentLabel=t.text)}))},onConfirm:function(e){this.showPicker=!1,this.$emit("input",e.value),this.$emit("change",e)}}},u=l,d=(i("4ce3"),i("2877")),f=Object(d["a"])(u,r,c,!1,null,null,null),p=f.exports,m=i("87d4"),h={name:"eventAdd",components:{Position:o["a"],UploadImg:s["a"],FormPicker:p},data:function(){return{loading:!1,disabled:!0,imageUrl:"",form:{},facilityTypes:[],issueClassifys:[],position:{}}},watch:{position:{deep:!0,handler:function(e){this.form.lng=e.lng,this.form.lat=e.lat}},imageUrl:{handler:function(e){this.form.imageUrls=[e]}},form:{deep:!0,handler:function(e){e.lng&&e.lat&&e.address&&e.description&&e.imageUrls&&e.facilityTypeCode&&e.issueTypeId?this.disabled=!1:this.disabled=!0}}},created:function(){this.getFacilityTypes()},methods:{getAddress:function(e){e&&(this.form.address=e)},getFacilityTypes:function(){var e=this;Object(m["b"])().then((function(t){e.facilityTypes=[],t.forEach((function(t){e.facilityTypes.push({value:t.code,text:t.name})}))}))},renderIssueTypes:function(e){var t=this;this.issueClassifys=[],Object(m["c"])({facilityType:e.value}).then((function(e){e.forEach((function(e){t.issueClassifys.push({value:e.id,text:e.name})}))}))},saveReport:function(e){var t=this;this.loading=!0;var i=Object.assign(this.form,{isMy:e,source:2});Object(m["g"])(i).then((function(){t.$toast.success("操作成功"),t.$router.push({path:"/eventReport"})})).catch((function(){t.$toast.fail("操作失败")})).finally((function(){t.loading=!1}))}}},v=h,b=(i("e38a"),Object(d["a"])(v,a,n,!1,null,"2d1264e6",null));t["default"]=b.exports}}]);
//# sourceMappingURL=eventAdd.1fbf259d.js.map