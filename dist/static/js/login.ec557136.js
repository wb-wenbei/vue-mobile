(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{3162:function(e,t,r){},"99af":function(e,t,r){"use strict";var a=r("23e7"),n=r("d039"),o=r("e8b5"),s=r("861d"),i=r("7b0b"),c=r("50c4"),l=r("8418"),m=r("65f0"),u=r("1dde"),d=r("b622"),f=r("2d00"),b=d("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",g=f>=51||!n((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),h=u("concat"),w=function(e){if(!s(e))return!1;var t=e[b];return void 0!==t?!!t:o(e)},x=!g||!h;a({target:"Array",proto:!0,forced:x},{concat:function(e){var t,r,a,n,o,s=i(this),u=m(s,0),d=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?s:arguments[t],w(o)){if(n=c(o.length),d+n>p)throw TypeError(v);for(r=0;r<n;r++,d++)r in o&&l(u,d,o[r])}else{if(d>=p)throw TypeError(v);l(u,d++,o)}return u.length=d,u}})},b30a:function(e,t,r){"use strict";r("3162")},dc3f:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-content"},[r("div",{staticClass:"background"}),r("div",{staticClass:"login-form"},[r("van-form",{on:{submit:e.onLogin}},[r("div",{staticStyle:{padding:"8px 0"}},[r("van-field",{attrs:{"label-width":"50",name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}}),r("van-field",{attrs:{type:"password","label-width":"50",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("div",{staticClass:"form-item"},[r("van-checkbox",{attrs:{shape:"square"},model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}},[e._v(" 自动登录 ")])],1),r("div",{staticClass:"form-item"},[r("van-button",{staticClass:"default-btn border-radius-4",attrs:{block:"","native-type":"submit",loading:e.loading,"loading-type":"spinner"}},[e._v(" 登录 ")])],1)])],1)])},n=[],o=(r("99af"),r("96cf"),r("1da1")),s=r("2909"),i=r("3786"),c={name:"Login",data:function(){return{form:{userName:"",password:""},rememberMe:!1,loading:!1}},methods:{onLogin:function(){var e=this;this.loading=!0,Object(i["b"])(this.form).then((function(t){e.$store.commit("SET_TOKEN",t.token);var r=[];for(var a in t.customers)r=[].concat(Object(s["a"])(r),Object(s["a"])(t.customers[a]));t.customers=r,t.saveTime=(new Date).getTime(),e.$store.commit("SET_USER_INFO",t),e.$store.commit("SET_CUSTOMER_ID",t.rootGroupId),e.getPermissions(),e.setRemember()})).catch((function(){e.$dialog.alert({title:"登录失败",message:"账号或密码错误，请重新输入!"}),e.loading=!1}))},getPermissions:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("setPermission");case 2:e.loading=!1,e.$router.push("/");case 4:case"end":return t.stop()}}),t)})))()},setRemember:function(){this.rememberMe&&console.log("自动登录")}}},l=c,m=(r("b30a"),r("2877")),u=Object(m["a"])(l,a,n,!1,null,"bcff4f80",null);t["default"]=u.exports}}]);
//# sourceMappingURL=login.ec557136.js.map