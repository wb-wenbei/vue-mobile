(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["HealthReportReport"],{"413d":function(t,n,a){"use strict";a("fc11")},ac09:function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"report-form"},[a("van-form",{on:{submit:t.onSubmit}},[t.disabled?a("div",{staticClass:"message"},[t._v(t._s(t.message))]):t._l(t.list,(function(n,e){return a("div",{key:n.id,staticClass:"form-item"},[a("div",{staticClass:"form-title"},[t._v(" "+t._s(e+1)+"、"+t._s(n.title)+" "),n.required?a("span",[t._v("("),a("span",{staticClass:"required"},[t._v("*")]),t._v(" 必填)")]):t._e()]),a("van-radio-group",{model:{value:n.answer,callback:function(a){t.$set(n,"answer",a)},expression:"l.answer"}},t._l(n.questionnaireOptionDtoList,(function(n){return a("van-radio",{key:n.id,attrs:{name:n.id,"icon-size":"16px"}},[t._v(" "+t._s(n.name)+" ")])})),1)],1)})),a("div",{staticClass:"form-item"},[t.disabled?a("van-button",{staticClass:"default-btn",attrs:{block:"",round:"","native-type":"button"},on:{click:t.goBack}},[t._v(" 返回 ")]):a("van-button",{staticClass:"default-btn",attrs:{block:"",round:"","native-type":"submit",loading:t.loading,disabled:t.disabled,"loading-type":"spinner"}},[t._v(" 上报 ")])],1)],2)],1)},i=[],s=(a("4160"),a("d3b7"),a("159b"),a("b06d")),o=1,r={name:"ReportForm",data:function(){return{loading:!1,disabled:!0,message:"您今天已经上报过信息了",list:[]}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;Object(s["a"])({questionnaireId:o}).then((function(n){t.list=n,t.disabled=!1})).catch((function(n){t.disabled=!0,t.message=n}))},onSubmit:function(){var t=this;if(this.checkForm(this.list)){this.loading=!0;var n=[];this.list.forEach((function(t){n.push(Object.assign({},t,{answer:[t.answer]})),t.answer=[t.answer]})),Object(s["c"])({questionnaireId:o,titleOptionDtoList:n}).then((function(){t.$toast.success("上报成功！"),t.$router.push("/healthReport")})).catch((function(n){t.$toast.fail("上报失败！"),console.log(n)})).finally((function(){t.loading=!1}))}else this.$toast.fail("请填写完整后提交！")},checkForm:function(t){var n=!0;return t.forEach((function(t){t.required&&!t.answer&&0!==t.answer&&(n=!1)})),n},goBack:function(){this.$router.back()}}},c=r,u=(a("413d"),a("2877")),l=Object(u["a"])(c,e,i,!1,null,"955b2854",null);n["default"]=l.exports},b06d:function(t,n,a){"use strict";a.d(n,"b",(function(){return i})),a.d(n,"a",(function(){return s})),a.d(n,"c",(function(){return o}));var e=a("afaa"),i=function(t){return Object(e["a"])({url:"/api-customer/staff-care/questionnaire/getHistoryTitleOption",method:"GET",params:t})},s=function(t){return Object(e["a"])({url:"/api-customer/staff-care/questionnaire/getQuestionnaire",method:"GET",params:t})},o=function(t){return Object(e["a"])({url:"/api-customer/staff-care/questionnaire/submitQuestionnaire",method:"POST",data:t})}},fc11:function(t,n,a){}}]);
//# sourceMappingURL=HealthReportReport.1273e534.js.map