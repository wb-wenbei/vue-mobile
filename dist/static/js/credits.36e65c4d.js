(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["credits"],{"30d8":function(t,e,a){},3382:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",t._g(t._b({attrs:{finished:t.finished,"finished-text":t.finishedText,"error-text":t.errorText},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},"van-list",t.$attrs,!1),t.$listeners),[t._l(t.list,(function(e,i){return[a("div",{key:"page_item_"+i,staticClass:"list-item"},[t._t("default",[a("van-cell",{attrs:{title:e.name||"--"}})],{item:e})],2)]}))],2)],1)},n=[],r=(a("99af"),a("a9e3"),a("d3b7"),a("2909")),s={name:"list",props:{api:{type:Function},params:{type:Object},pageSize:{type:Number},finishedText:{type:String,default:"没有更多了"},errorText:{type:String,default:"加载失败，请重试！"},dataFilter:{type:Function}},data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,pageParams:{pageSize:null,page:null},page:{pageSize:null,totalCount:null,currentPage:null}}},created:function(){this.pageParams.pageSize=this.pageSize||10},methods:{onLoad:function(){var t=this;this.pageParams.page=this.page.currentPage?this.page.currentPage+1:1;var e=Object.assign(this.pageParams,this.params);this.api(e).then((function(e){if(e){var a=e.data||(Array.isArray(e)?e:[]);t.list=[].concat(Object(r["a"])(t.list),Object(r["a"])(a)),t.dataFilter&&"function"===typeof t.dataFilter&&(t.list=t.dataFilter(t.list)),t.page.currentPage=e.page,t.page.totalCount=e.totalCount,t.page.pageSize=e.pageSize,(!t.page.pageSize||t.page.currentPage*t.page.pageSize>=t.page.totalCount)&&(t.finished=!0)}else t.finished=!0})).catch((function(){t.finished=!0})).finally((function(){t.loading=!1,t.refreshing=!1}))},onRefresh:function(){this.finished=!1,this.loading=!0,this.list=[],this.page={pageSize:null,totalCount:null,currentPage:null},this.pageParams={pageSize:this.pageSize||10,page:null},this.onLoad()}}},c=s,l=a("2877"),o=Object(l["a"])(c,i,n,!1,null,"0b9a01cc",null);e["a"]=o.exports},3937:function(t,e,a){"use strict";a("30d8")},"99af":function(t,e,a){"use strict";var i=a("23e7"),n=a("d039"),r=a("e8b5"),s=a("861d"),c=a("7b0b"),l=a("50c4"),o=a("8418"),d=a("65f0"),u=a("1dde"),f=a("b622"),g=a("2d00"),p=f("isConcatSpreadable"),h=9007199254740991,m="Maximum allowed index exceeded",v=g>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=u("concat"),_=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},C=!v||!b;i({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,i,n,r,s=c(this),u=d(s,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(r=-1===e?s:arguments[e],_(r)){if(n=l(r.length),f+n>h)throw TypeError(m);for(a=0;a<n;a++,f++)a in r&&o(u,f,r[a])}else{if(f>=h)throw TypeError(m);o(u,f++,r)}return u.length=f,u}})},a434:function(t,e,a){"use strict";var i=a("23e7"),n=a("23cb"),r=a("a691"),s=a("50c4"),c=a("7b0b"),l=a("65f0"),o=a("8418"),d=a("1dde"),u=a("ae40"),f=d("splice"),g=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!g},{splice:function(t,e){var a,i,d,u,f,g,b=c(this),_=s(b.length),C=n(t,_),S=arguments.length;if(0===S?a=i=0:1===S?(a=0,i=_-C):(a=S-2,i=h(p(r(e),0),_-C)),_+a-i>m)throw TypeError(v);for(d=l(b,i),u=0;u<i;u++)f=C+u,f in b&&o(d,u,b[f]);if(d.length=i,a<i){for(u=C;u<_-i;u++)f=u+i,g=u+a,f in b?b[g]=b[f]:delete b[g];for(u=_;u>_-i+a;u--)delete b[u-1]}else if(a>i)for(u=_-i;u>C;u--)f=u+i-1,g=u+a-1,f in b?b[g]=b[f]:delete b[g];for(u=0;u<a;u++)b[u+C]=arguments[u+2];return b.length=_-i+a,d}})},ec41:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"credits-content"},[a("div",{staticClass:"credits-card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"credits"},[a("span",[t._v(t._s(t.detail.totalIntegral))]),t._v(" 积分 ")]),a("div",{staticClass:"credits-btn"},[a("van-button",{attrs:{size:"mini",color:"white"},on:{click:t.toExchange}},[t._v(" 积分兑换 ")])],1)]),a("div",{staticClass:"card-status"},[a("div",{staticClass:"button"},[a("div",{staticClass:"button-content"},[t._v(" "+t._s(1===t.detail.isSignIn?"已签到":"未签到")+" ")])])]),a("div",{staticClass:"card-description"},[t._v(" 今日"+t._s(1===t.detail.isSignIn?"已签到":"未签到")+"， "),t.detail.signInNumber>0?a("span",[t._v(" 还可签到"+t._s(t.detail.signInNumber)+"次， ")]):t._e(),t._v(" 目前项目排名"+t._s(t.detail.rank)+" ")])]),a("div",{staticClass:"credit-card"},[a("page-list",{attrs:{api:t.pageAPI,params:t.params,dataFilter:t.dataFilter},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item;return["date"===i.type?a("div",{staticClass:"credit-item-date"},[t._v(" "+t._s(t._f("formatDate")(i.date))+" ")]):a("div",{staticClass:"credit-item"},[a("div",{staticClass:"item-header"},[a("div",[t._v(" "+t._s(t._f("formatTime")(i.createTime))+" "+t._s(i.integralTypeName||"--")+" ")]),a("div",{staticClass:"header-right"},[i.integralChange>0?a("span",[t._v("+")]):t._e(),t._v(t._s(i.integralChange)+"积分 ")])])])]}}])})],1)])},n=[],r=(a("a434"),a("fc23")),s=a("3382"),c=a("b99b"),l={name:"Credits",components:{PageList:s["a"]},data:function(){return{pageAPI:r["d"],params:{},detail:{rank:2,signInDays:1,signInNumber:0,totalIntegral:110}}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;Object(r["c"])().then((function(e){t.detail=e}))},toExchange:function(){this.$router.push({path:"/credits/exchange"})},dataFilter:function(t){for(var e=0;e<t.length-1;e++)"date"!==t[e].type&&(0===e&&(t.unshift({type:"date",id:"date_"+e,date:t[e].createTime}),e++),t[e].createTime&&t[e+1].createTime&&Object(c["a"])(t[e].createTime)!==Object(c["a"])(t[e+1].createTime)&&(t.splice(e+1,0,{type:"date",id:"date_"+e,date:t[e+1].createTime}),e++));return t}}},o=l,d=(a("3937"),a("2877")),u=Object(d["a"])(o,i,n,!1,null,"0d0c789c",null);e["default"]=u.exports},fc23:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return l}));var i=a("afaa"),n=function(t){return Object(i["a"])({url:"/api-customer/staff-care/integral/getIntegralRecord",method:"GET",params:t})},r=function(t){return Object(i["a"])({method:"POST",url:"/api-customer/staff-care/integral/signIn",data:t})},s=function(t){return Object(i["a"])({method:"POST",url:"/api-customer/staff-care/integral/allowSignIn",data:t})},c=function(t){return Object(i["a"])({method:"GET",url:"/api-customer/staff-care/integral/getIntegralSum",params:t})},l=function(t){return Object(i["a"])({method:"POST",url:"/api-customer/staff-care/setting/getGoodsImg",data:t})}}}]);
//# sourceMappingURL=credits.36e65c4d.js.map