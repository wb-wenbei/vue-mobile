{"version":3,"sources":["webpack:///./src/views/eventReport/eventHandleDetail.vue?eb4c","webpack:///src/views/eventReport/eventHandleDetail.vue","webpack:///./src/views/eventReport/eventHandleDetail.vue?0f29","webpack:///./src/views/eventReport/eventHandleDetail.vue","webpack:///./src/views/eventReport/eventHandleDetail.vue?0743","webpack:///./src/api/issue/index.js","webpack:///./node_modules/core-js/modules/es.array.last-index-of.js","webpack:///./node_modules/core-js/internals/array-last-index-of.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","issue","description","_l","item","index","key","attrs","on","$event","preview","address","facilityTypeName","issueTypeName","reporterName","_f","createTime","deadLine","historyHandlers","_e","historyAssingers","style","height","model","value","callback","$$v","dialogVisible","expression","comfirm","required","message","content","staticStyle","employeeId","ownerId","issueOrgId","orgId","status","showDialog","distance","goToHandle","id","width","showPopup","onSubmit","scopedSlots","_u","fn","proxy","form","$set","staticRenderFns","data","facilityCode","issueTypeId","reporterId","imageUrls","handledImageUrls","applicantMinutes","applicationReason","issueId","$store","state","userInfo","created","queryDetail","methods","applyDelay","console","log","$router","push","path","params","$toast","images","component","reportIssueAPI","http","url","method","getIssuesTypesAPI","issueDetailAPI","getFacilityTypeAPI","issueToHandleAPI","notToHandleAPI","options","createIssuePostponeAPI","$","lastIndexOf","target","proto","forced","toIndexedObject","toInteger","toLength","arrayMethodIsStrict","arrayMethodUsesToLength","min","Math","nativeLastIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","FORCED","module","exports","searchElement","apply","arguments","O","length"],"mappings":"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","file":"static/js/eventHandleDetail.ce05b987.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"event-handle-detail\"},[_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.issue.description))]),_c('div',{staticClass:\"img\"},_vm._l((_vm.issue.imageUrls),function(item,index){return _c('li',{key:index},[_c('img',{attrs:{\"src\":item},on:{\"click\":function($event){return _vm.preview(item)}}})])}),0),_c('div',{staticClass:\"address\"},[_vm._v(_vm._s(_vm.issue.address))])]),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"设施类型\",\"value\":_vm.issue.facilityTypeName}}),_c('van-cell',{attrs:{\"title\":\"问题分类\",\"value\":_vm.issue.issueTypeName}}),_c('van-cell',{attrs:{\"title\":\"上报人\",\"value\":_vm.issue.reporterName}}),_c('van-cell',{attrs:{\"title\":\"上报时间\",\"value\":_vm._f(\"formatDateTime\")(_vm.issue.createTime)}}),_c('van-cell',{attrs:{\"title\":\"处理截止时间\",\"value\":_vm._f(\"formatDateTime\")(_vm.issue.deadLine)}}),(_vm.issue.historyHandlers)?_c('van-cell',{attrs:{\"title\":\"前处理人\",\"value\":_vm.issue.historyHandlers}}):_vm._e(),(_vm.issue.historyAssingers)?_c('van-cell',{attrs:{\"title\":\"指派人\",\"value\":_vm.issue.historyAssingers}}):_vm._e()],1)],1),_c('van-popup',{style:({ height: '30%' }),attrs:{\"position\":\"bottom\"},model:{value:(_vm.dialogVisible),callback:function ($$v) {_vm.dialogVisible=$$v},expression:\"dialogVisible\"}},[_c('van-form',{staticClass:\"no-handle-form\",on:{\"submit\":_vm.comfirm}},[_c('van-field',{attrs:{\"rows\":\"3\",\"autosize\":\"\",\"label\":\"原因\",\"type\":\"textarea\",\"placeholder\":\"不能处理原因\",\"rules\":[{ required: true, message: '请填不能处理原因' }]},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\" 提交 \")])],1)],1)],1),(\n      _vm.employeeId == _vm.issue.ownerId ||\n        (_vm.issue.ownerId == null && _vm.issue.issueOrgId == _vm.orgId)\n    )?_c('div',{staticClass:\"btn-bottom issue-footer\"},[(_vm.issue.status === 1)?[_c('van-button',{staticClass:\"report-btn unableHandle\",attrs:{\"round\":\"\"},on:{\"click\":_vm.showDialog}},[_vm._v(\"不能处理\")]),(_vm.distance > 100)?_c('van-button',{staticClass:\"report-btn\",attrs:{\"disabled\":\"disabled\",\"round\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.goToHandle(_vm.issue.id)}}},[_vm._v(\"去处理\")]):_c('van-button',{staticClass:\"report-btn\",attrs:{\"round\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.goToHandle(_vm.issue.id)}}},[_vm._v(\"去处理\")])]:_vm._e()],2):_vm._e(),_c('van-popup',{style:({ width: '85%' }),attrs:{\"close-on-click-overlay\":false},model:{value:(_vm.showPopup),callback:function ($$v) {_vm.showPopup=$$v},expression:\"showPopup\"}},[_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"type\":\"number\",\"min\":0,\"rules\":[{ required: true, message: '请填写时长' }],\"label\":\"延时时长\"},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_vm._v(\" 分钟 \")]},proxy:true}]),model:{value:(_vm.form.applicantMinutes),callback:function ($$v) {_vm.$set(_vm.form, \"applicantMinutes\", $$v)},expression:\"form.applicantMinutes\"}}),_c('van-field',{attrs:{\"type\":\"textarea\",\"label\":\"申请理由\",\"rules\":[{ required: true, message: '请填写申请理由' }]},model:{value:(_vm.form.applicationReason),callback:function ($$v) {_vm.$set(_vm.form, \"applicationReason\", $$v)},expression:\"form.applicationReason\"}}),_c('div',{staticStyle:{\"margin\":\"16px\",\"text-align\":\"center\"}},[_c('van-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\",\"size\":\"small\"}},[_vm._v(\" 申请 \")]),_c('van-button',{attrs:{\"plain\":\"\",\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.showPopup = false}}},[_vm._v(\" 取消 \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"event-handle-detail\">\r\n    <div class=\"main\">\r\n      <div class=\"content\">\r\n        <div class=\"title\">{{ issue.description }}</div>\r\n        <div class=\"img\">\r\n          <li v-for=\"(item, index) in issue.imageUrls\" :key=\"index\">\r\n            <img :src=\"item\" @click=\"preview(item)\" />\r\n          </li>\r\n        </div>\r\n        <div class=\"address\">{{ issue.address }}</div>\r\n      </div>\r\n      <van-cell-group>\r\n        <van-cell title=\"设施类型\" :value=\"issue.facilityTypeName\"></van-cell>\r\n        <van-cell title=\"问题分类\" :value=\"issue.issueTypeName\"></van-cell>\r\n        <van-cell title=\"上报人\" :value=\"issue.reporterName\"></van-cell>\r\n        <van-cell\r\n          title=\"上报时间\"\r\n          :value=\"issue.createTime | formatDateTime\"\r\n        ></van-cell>\r\n        <van-cell\r\n          title=\"处理截止时间\"\r\n          :value=\"issue.deadLine | formatDateTime\"\r\n        ></van-cell>\r\n        <van-cell\r\n          v-if=\"issue.historyHandlers\"\r\n          title=\"前处理人\"\r\n          :value=\"issue.historyHandlers\"\r\n        ></van-cell>\r\n        <van-cell\r\n          v-if=\"issue.historyAssingers\"\r\n          title=\"指派人\"\r\n          :value=\"issue.historyAssingers\"\r\n        ></van-cell>\r\n      </van-cell-group>\r\n    </div>\r\n    <van-popup\r\n      v-model=\"dialogVisible\"\r\n      position=\"bottom\"\r\n      :style=\"{ height: '30%' }\"\r\n    >\r\n      <van-form @submit=\"comfirm\" class=\"no-handle-form\">\r\n        <van-field\r\n          v-model=\"content\"\r\n          rows=\"3\"\r\n          autosize\r\n          label=\"原因\"\r\n          type=\"textarea\"\r\n          placeholder=\"不能处理原因\"\r\n          :rules=\"[{ required: true, message: '请填不能处理原因' }]\"\r\n        />\r\n        <div style=\"margin: 16px;\">\r\n          <van-button round block type=\"primary\" native-type=\"submit\">\r\n            提交\r\n          </van-button>\r\n        </div>\r\n      </van-form>\r\n    </van-popup>\r\n    <div\r\n      class=\"btn-bottom issue-footer\"\r\n      v-if=\"\r\n        employeeId == issue.ownerId ||\r\n          (issue.ownerId == null && issue.issueOrgId == orgId)\r\n      \"\r\n    >\r\n      <template v-if=\"issue.status === 1\">\r\n        <van-button round @click=\"showDialog\" class=\"report-btn unableHandle\"\r\n        >不能处理</van-button\r\n        >\r\n        <!--<van-button\r\n          round\r\n          @click.stop=\"applyDelay(issue)\"\r\n          v-if=\"issue.deadLine > new Date().getTime()\"\r\n          >延时申请</van-button\r\n        >-->\r\n        <van-button\r\n          v-if=\"distance > 100\"\r\n          disabled=\"disabled\"\r\n          round\r\n          type=\"primary\"\r\n          @click=\"goToHandle(issue.id)\"\r\n          class=\"report-btn\"\r\n        >去处理</van-button\r\n        >\r\n        <van-button\r\n          v-else\r\n          round\r\n          type=\"primary\"\r\n          @click=\"goToHandle(issue.id)\"\r\n          class=\"report-btn\"\r\n        >去处理</van-button\r\n        >\r\n      </template>\r\n    </div>\r\n    <!-- 延时弹窗 -->\r\n    <van-popup\r\n      v-model=\"showPopup\"\r\n      :close-on-click-overlay=\"false\"\r\n      :style=\"{ width: '85%' }\"\r\n    >\r\n      <van-form @submit=\"onSubmit\">\r\n        <van-field\r\n          type=\"number\"\r\n          :min=\"0\"\r\n          v-model=\"form.applicantMinutes\"\r\n          :rules=\"[{ required: true, message: '请填写时长' }]\"\r\n          label=\"延时时长\"\r\n        >\r\n          <template #right-icon>\r\n            分钟\r\n          </template>\r\n        </van-field>\r\n        <van-field\r\n          v-model=\"form.applicationReason\"\r\n          type=\"textarea\"\r\n          label=\"申请理由\"\r\n          :rules=\"[{ required: true, message: '请填写申请理由' }]\"\r\n        />\r\n        <div style=\"margin: 16px;text-align: center\">\r\n          <van-button type=\"primary\" native-type=\"submit\" size=\"small\">\r\n            申请\r\n          </van-button>\r\n          <van-button\r\n            plain\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click=\"showPopup = false\"\r\n          >\r\n            取消\r\n          </van-button>\r\n        </div>\r\n      </van-form>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { issueDetailAPI, notToHandleAPI } from \"@/api/issue\";\r\nimport { ImagePreview } from \"vant\";\r\nimport { createIssuePostponeAPI } from \"@/api/issue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      content: \"\",\r\n      issue: {\r\n        description: null,\r\n        facilityCode: null,\r\n        facilityTypeName: null,\r\n        issueTypeId: null,\r\n        issueTypeName: null,\r\n        reporterId: null,\r\n        reporterName: null,\r\n        createTime: null,\r\n        historyHandlers: null,\r\n        historyAssingers: null,\r\n        imageUrls: [],\r\n        handledImageUrls: []\r\n      },\r\n      form: {\r\n        applicantMinutes: \"\",\r\n        applicationReason: \"\",\r\n        issueId: null\r\n      },\r\n      employeeId: this.$store.state.userInfo.employeeId,\r\n      orgId: this.$store.state.userInfo.orgId,\r\n      showPopup: false,\r\n      issueId: null,\r\n      distance: null\r\n    };\r\n  },\r\n  created() {\r\n    let href = window.location.href;\r\n    let distanceIndex = href.lastIndexOf(\"/\");\r\n    let distance = href.substring(distanceIndex + 1, href.length);\r\n\r\n    let hrefWithoutDistance = href.substring(0, distanceIndex);\r\n    let issueIdIndex = hrefWithoutDistance.lastIndexOf(\"/\");\r\n    let issueId = hrefWithoutDistance.substring(\r\n      issueIdIndex + 1,\r\n      hrefWithoutDistance.length\r\n    );\r\n\r\n    if (distance == -1) {\r\n      distance = null;\r\n    }\r\n    this.distance = distance;\r\n    this.issueId = issueId;\r\n    this.queryDetail(this.issueId);\r\n  },\r\n  methods: {\r\n    applyDelay(issue) {\r\n      console.log(issue);\r\n      this.form = {};\r\n      this.form.issueId = issue.id;\r\n      this.showPopup = true;\r\n    },\r\n    queryDetail(issueId) {\r\n      let parameters = { id: issueId };\r\n      issueDetailAPI(parameters).then(res => {\r\n        this.issue = res;\r\n      });\r\n    },\r\n    goToHandle(id) {\r\n      this.$router.push({\r\n        path: `/eventReport/eventHandle/${id}`,\r\n        params: { id }\r\n      });\r\n    },\r\n    comfirm() {\r\n      let data = {\r\n        description: this.content,\r\n        issueId: this.issueId\r\n      };\r\n\r\n      if (this.content === \"\") {\r\n        this.$toast(\"请输入不能处理的理由\");\r\n      } else {\r\n        notToHandleAPI({ data })\r\n          .then(() => {\r\n            this.content = \"\";\r\n            this.$toast.success(`提交成功！`);\r\n            this.$router.back();\r\n          })\r\n          .catch(err => {\r\n            this.$toast.fail(err);\r\n          })\r\n          .finally(() => {\r\n            this.dialogVisible = false;\r\n          });\r\n      }\r\n    },\r\n    onSubmit() {\r\n      createIssuePostponeAPI(this.form)\r\n        .then(() => {\r\n          this.$toast.success(`申请成功，待审核中...`);\r\n          this.$router.back();\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          this.showPopup = false;\r\n        });\r\n    },\r\n    showDialog() {\r\n      this.dialogVisible = true;\r\n      this.content = \"\";\r\n    },\r\n    preview(images) {\r\n      images && ImagePreview([images]);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.event-handle-detail {\r\n  text-align: left;\r\n}\r\n\r\n.issue-footer {\r\n  display: flex;\r\n  padding: @padding-md 0;\r\n  button {\r\n    flex: 1;\r\n    margin: 0 @margin-md;\r\n  }\r\n}\r\n.main {\r\n  background-color: #fff;\r\n\r\n  .content {\r\n    padding: 8px 16px;\r\n\r\n    .title {\r\n      height: 60px;\r\n      margin-bottom: 8px;\r\n    }\r\n\r\n    .address {\r\n      font-size: 14px;\r\n      color: #333333;\r\n      height: 36px;\r\n      line-height: 48px;\r\n    }\r\n  }\r\n\r\n  .van-panel__header {\r\n    padding: 0;\r\n  }\r\n\r\n  .img {\r\n    background-color: #fff;\r\n    overflow: hidden;\r\n\r\n    li {\r\n      float: left;\r\n      list-style: none;\r\n      margin-right: 12px;\r\n\r\n      img {\r\n        width: 64px;\r\n        height: 64px;\r\n        display: block;\r\n      }\r\n    }\r\n  }\r\n}\r\n.no-handle-form {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./eventHandleDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./eventHandleDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./eventHandleDetail.vue?vue&type=template&id=5e8b1644&scoped=true&\"\nimport script from \"./eventHandleDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./eventHandleDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./eventHandleDetail.vue?vue&type=style&index=0&id=5e8b1644&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e8b1644\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./eventHandleDetail.vue?vue&type=style&index=0&id=5e8b1644&lang=less&scoped=true&\"","import http from \"@/server/http.js\";\r\n\r\n// 上报问题\r\nexport const reportIssueAPI = data => {\r\n  return http({\r\n    url: \"/api-customer/location/issue/report\",\r\n    method: \"POST\",\r\n    data\r\n  });\r\n};\r\n\r\n// 查询问题类型\r\nexport const getIssuesTypesAPI = params => {\r\n  return http({\r\n    url: \"/api-customer/location/issueClassifys\",\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n\r\n//  查询待处理的问题\r\nexport const getIssuesToHandleAPI = params => {\r\n  return http({\r\n    url: \"/api-customer/location/issues/search\",\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n\r\n// 根据Id删除市政设施\r\nexport const issueDetailAPI = params => {\r\n  return http({\r\n    url: `/api-customer/location/issues/among/${params.id}`,\r\n    method: \"GET\"\r\n  });\r\n};\r\n\r\n// 获取设施配置\r\nexport const getFacilityTypeAPI = params => {\r\n  return http({\r\n    url: \"/api-customer/location/facility/types\",\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n\r\n// 根据每种设施的数量\r\nexport const getFacilitiesCountAPI = params => {\r\n  return http({\r\n    url: \"/api-customer/location/facilitiesCount\",\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n\r\n// 获取组织结构\r\nexport const getAllOrgAPI = params => {\r\n  return http({\r\n    url: \"/api-customer/organization/queryOwnOrganization\",\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n\r\n// 图片上传\r\nexport const uploadImgAPI = data => {\r\n  return http({\r\n    url: \"/api-customer/zuul/dig-construction/uploadFile\",\r\n    method: \"POST\",\r\n    data\r\n  });\r\n};\r\n\r\n// 根据类型查询设施的地理区域\r\nexport const getGpsAreasByTypeAPI = params => {\r\n  return http({\r\n    url: `/api-customer/location/facilities/type/${options.data.type}/gpsAreas`,\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n\r\n// 根据类型查询设施的地理区域\r\nexport const queryNearbyLabelsAPI = data => {\r\n  return http({\r\n    url: `/api-customer/location/queryNearbyLabels`,\r\n    method: \"POST\",\r\n    data\r\n  });\r\n};\r\n\r\nexport const queryEmployeesByOrgIdAPI = params => {\r\n  return http({\r\n    url: `/api-customer/entity/queryEmployeesByOrgId`,\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n\r\nexport const querySanitationReportByEmployeeIdAPI = params => {\r\n  return http({\r\n    url: `/api-customer/querySanitationReportByEmployeeId`,\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n\r\n// 监督检查去处理\r\n\r\nexport const issueToHandleAPI = data => {\r\n  return http({\r\n    url: `api-customer/location/issue/handle`,\r\n    method: \"POST\",\r\n    data\r\n  });\r\n};\r\n\r\n// 不能处理\r\nexport const notToHandleAPI = (options = {}) => {\r\n  return http({\r\n    url: `/api-customer/location/issue/unableHandle`,\r\n    method: \"POST\",\r\n    data: options.data\r\n  });\r\n};\r\n\r\n// /issuePostpone/create创建延时申请\r\nexport const createIssuePostponeAPI = data => {\r\n  return http({\r\n    url: `/api-customer/location/issuePostpone/create`,\r\n    method: \"POST\",\r\n    data\r\n  });\r\n};\r\n\r\n// /issuePostpone/list/page获取分页的延时申请信息\r\nexport const getIssuePostponePageAPI = params => {\r\n  return http({\r\n    url: `/api-customer/location/issuePostpone/list/page`,\r\n    method: \"GET\",\r\n    params\r\n  });\r\n};\r\n","var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar min = Math.min;\nvar nativeLastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : nativeLastIndexOf;\n"],"sourceRoot":""}